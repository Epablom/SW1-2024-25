<!DOCTYPE html>
<html lang="es">
    
<%- include('partials/head') %>

<body>
    <!-- Contenedor General -->
    <div id="messages-container" class="container">
        <!-- Sidebar Section -->
        <%- include('partials/leftBar') %>
        <!-- End of Sidebar Section -->

        <!-- Main Chat Layout -->
        <div class="main-content">
            <!-- Header (Login and Dark Mode) -->
            <header class="chat-header">
                <h1>Bienvenido al Chat de CEU-Study<span class="success">Hub</span></h1>
            </header>

            <!-- Section Mensajes -->
            <main>
                <section class="seccion-mensajes">
                    <!-- Contact List Section -->
                    <div class="lista-conversaciones">
                        <div class="search-section">
                            <h2><i class="fas fa-search"></i> Buscar Usuario</h2>
                            <form id="searchUserForm" class="search-form">
                                <div class="search-input-container">
                                    <input type="text" name="username" placeholder="Buscar usuario..." required>
                                    <button type="submit"><i class="fas fa-search"></i></button>
                                </div>
                            </form>
                        </div>
                        
                        <div class="chats-section">
                            <h2><i class="fas fa-comments"></i> Conversaciones</h2>
                            <div id="conversationList" class="chat-list">
                                <% if (contacts.length > 0) { %>
                                    <% contacts.forEach(contact => { %>
                                        <div class="chat-item">
                                            <div class="chat-item-content">
                                                <img src="<%= contact.imagelink %>" alt="<%= contact.username %>" class="profile-pic">
                                                <div class="chat-item-info">
                                                    <p class="chat-item-name"><%= contact.username %></p>
                                                    <p class="chat-item-time">Último mensaje...</p> <!-- Puedes cambiar este texto dinámicamente -->
                                                </div>
                                            </div>
                                        </div>
                                    <% }) %>
                                <% } else { %>
                                    <p>No hay contactos disponibles.</p>
                                <% } %>
                            </div>
                        </div>
                    </div>

                    <!-- Chat Window Section -->
                    <div class="ventana-conversacion">
                        <div id="chatHeader" class="chat-header">
                            <h2>Chat con <span id="chatUsername">Carlos García</span></h2>
                        </div>
                        
                        <div id="messagesList" class="messages-list">
                            <div class="message sent">Hola.<span class="message-time">7:04am</span></div>
                            <div class="message received">Hola. ¿Estás interesado en mis apuntes?<span class="message-time">7:05am</span></div>
                            <div class="message sent">Sí.<span class="message-time">7:06am</span></div>
                            <div class="message received">¿Qué asignatura quieres?<span class="message-time">7:07am</span></div>
                            <div class="message sent">Estoy interesado en Sistemas Web 1.<span class="message-time">7:08am</span></div>
                            <div class="message received">Perfecto. De esa asignatura también tengo ejercicios extra.<span class="message-time">7:09am</span></div>
                        </div>

                        <form id="sendMessageForm" class="message-form">
                            <div class="message-input-container">
                                <textarea name="content" id="messageContent" placeholder="Escribe tu mensaje..." required></textarea>
                                <button type="submit"><i class="fas fa-paper-plane"></i></button>
                            </div>
                        </form>
                    </div>
                </section>
            </main>
        </div>
        <!-- Right Section -->
        <%- include('partials/rightBar') %>
        <!-- End of right section -->
    </div>

    <script src="/public/js/script.js"></script>
    <script src="../public/js/index.js"></script>
</body>

</html>
